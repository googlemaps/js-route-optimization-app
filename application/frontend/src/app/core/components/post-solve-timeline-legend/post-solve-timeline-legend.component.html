<div class="mat-typography legend-container" #legendContainer>
  <p class="mat-body-strong">Average across all vehicles</p>
  <p class="legend-timeline-container">
    <svg width="100%" height="14" #legendTimeline>
      <line
        class="driving"
        [attr.x1]="this.timelineLengths.travel[0]"
        y1="50%"
        [attr.x2]="this.timelineLengths.travel[1]"
        y2="50%"
        *ngIf="this.timelineLengths.travel[1] - this.timelineLengths.travel[0] > 0" />
      <line
        class="idle-time"
        [attr.x1]="this.timelineLengths.idle[0]"
        y1="50%"
        [attr.x2]="this.timelineLengths.idle[1]"
        y2="50%"
        *ngIf="this.timelineLengths.idle[1] - this.timelineLengths.idle[0] > 0" />
      <line
        class="break-time"
        stroke="url(#BreakPattern)"
        [attr.x1]="this.timelineLengths.break[0]"
        y1="50%"
        [attr.x2]="this.timelineLengths.break[1]"
        y2="50%"
        *ngIf="this.timelineLengths.break[1] - this.timelineLengths.break[0] > 0" />
      <line
        class="service"
        [attr.x1]="this.timelineLengths.service[0]"
        y1="50%"
        [attr.x2]="this.timelineLengths.service[1]"
        y2="50%"
        *ngIf="this.timelineLengths.service[1] - this.timelineLengths.service[0] > 0" />
    </svg>
  </p>
  <div *ngIf="formattedVehicleTimeAverages; else noData">
    <div class="percent-label margin-right">
      <span class="mat-body-strong"
        >{{ formattedVehicleTimeAverages?.serviceTime || 0 | number: '1.0-0' }}%</span
      >
      Service
    </div>
    <div class="percent-label margin-right">
      <span class="mat-body-strong"
        >{{ formattedVehicleTimeAverages?.travelTime || 0 | number: '1.0-0' }}%</span
      >
      Driving
    </div>
    <div class="percent-label margin-right">
      <span class="mat-body-strong"
        >{{ formattedVehicleTimeAverages?.idleTime || 0 | number: '1.0-0' }}%</span
      >
      Idle
    </div>
    <div class="percent-label">
      <span class="mat-body-strong"
        >{{ formattedVehicleTimeAverages?.breakTime || 0 | number: '1.0-0' }}%</span
      >
      Break
    </div>
  </div>
</div>

<ng-template #noData> No data available. </ng-template>
